<!DOCTYPE html><html class="default"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>ull-esit-inf-dsi-21-22-prct07-music-datamodel-grupo-z</title><meta name="description" content="Documentation for ull-esit-inf-dsi-21-22-prct07-music-datamodel-grupo-z"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">ull-esit-inf-dsi-21-22-prct07-music-datamodel-grupo-z</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label><input type="checkbox" id="tsd-filter-externals" checked/><label class="tsd-widget" for="tsd-filter-externals">Externals</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><h1> ull-esit-inf-dsi-21-22-prct07-music-datamodel-grupo-z</h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><div class="tsd-panel tsd-typography">
<a href="#práctica-7-modelo-de-datos-de-un-sistema-de-información-que-permite-almacenar-una-biblioteca-musical" id="práctica-7-modelo-de-datos-de-un-sistema-de-información-que-permite-almacenar-una-biblioteca-musical" style="color: inherit; text-decoration: none;">
  <h1>Práctica 7: Modelo de datos de un sistema de información que permite almacenar una biblioteca musical</h1>
</a>
<p>En esta práctica vamos a desarrollar un sistema de información de música. Desde ella se podrán gestionar géneros musicales, artistas, grupos, canciones, albums y playlists. Para modelar este sistema desarrollaremos una serie de clases y tipos de datos que facilitarán esta gestión. Haremos uso de la librería lowdb como base de datos local y de la librería Inquirer.js para crear una interfaz amigable con el usuario.</p>

<a href="#sistema-de-clases" id="sistema-de-clases" style="color: inherit; text-decoration: none;">
  <h2>Sistema de clases</h2>
</a>
<p>Hemos desarrollado 6 clases principales: Song, Artist, Genre, Album, Group y Playlist. Cada una de ella gestiona un elemento del sistema por separado. </p>
<p>// cokentar el tipo time. </p>

<a href="#clase-genre" id="clase-genre" style="color: inherit; text-decoration: none;">
  <h3>Clase Genre</h3>
</a>
<p>Desde la clase Genre, se gestiona toda la información necesaria para un género musical. Esta clase tiene los atributos privados:</p>
<ul>
<li>name de tipo string, donde se almacena el nombre del género. </li>
<li>components de tipo Array de Artist | Group ( clases que definiremos mas adelante ), donde se guarda una lista de todos los artistas o grupos que tienen alguna canción del género. </li>
<li>albums almacena un array de tipo Album, con todos los albumes que tienen alguna canción del género.</li>
<li>songs donde se guarda un array con todas las canciones relacionadas co  el género en cuestión.</li>
</ul>
<p>Desde el constructor solo se recibe el nombre del género ya que los albums, canciones, grupos y artistas relacionados se irán añadiendo posteriormente a la clase. </p>
<p>  constructor(
    private name: string,
    private components: Array<string> = [],
    private albums: Array<string> = [],
    private songs: Array<string> = [],
  ) {}</p>
<p>Cada uno de los atributos privados comentados previamente tiene un getter donde se devuelve el atributo especificado. </p>
<pre><code><span class="hl-0">public</span><span class="hl-1"> </span><span class="hl-2">getName</span><span class="hl-1">(): </span><span class="hl-0">string</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-3">return</span><span class="hl-1"> </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-0">name</span><span class="hl-1">;</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-0">public</span><span class="hl-1"> </span><span class="hl-2">getComponents</span><span class="hl-1">(): </span><span class="hl-5">Array</span><span class="hl-1">&lt;</span><span class="hl-0">string</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">    return this.components;</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-0">public</span><span class="hl-1"> </span><span class="hl-2">getAlbums</span><span class="hl-1">(): </span><span class="hl-5">Array</span><span class="hl-1">&lt;</span><span class="hl-0">string</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">    return this.albums;</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-0">public</span><span class="hl-1"> </span><span class="hl-2">getSongs</span><span class="hl-1">(): </span><span class="hl-5">Array</span><span class="hl-1">&lt;</span><span class="hl-0">string</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">    return this.</span><span class="hl-0">songs</span><br/><span class="hl-1">}</span>
</code></pre>
<p>También tiene una funcion add para añadir una cancion, album y artista, en este último se comprueba que el artista no esté previamente relacionado al género para que no se guarde en la base de datos dos veces el mismo artista</p>
<pre><code><span class="hl-0">public</span><span class="hl-1"> </span><span class="hl-2">addAlbum</span><span class="hl-1">(</span><span class="hl-0">newAlbum</span><span class="hl-1">: </span><span class="hl-0">string</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-0">albums</span><span class="hl-1">.</span><span class="hl-2">push</span><span class="hl-1">(</span><span class="hl-0">newAlbum</span><span class="hl-1">)</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-0">public</span><span class="hl-1"> </span><span class="hl-2">addArtist</span><span class="hl-1">(</span><span class="hl-0">newArtist</span><span class="hl-1">: </span><span class="hl-0">string</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-3">if</span><span class="hl-1"> (!</span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-0">components</span><span class="hl-1">.</span><span class="hl-2">includes</span><span class="hl-1">(</span><span class="hl-0">newArtist</span><span class="hl-1">))</span><br/><span class="hl-1">        </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-0">components</span><span class="hl-1">.</span><span class="hl-2">push</span><span class="hl-1">(</span><span class="hl-0">newArtist</span><span class="hl-1">)</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-0">public</span><span class="hl-1"> </span><span class="hl-2">addSong</span><span class="hl-1">(</span><span class="hl-0">newSong</span><span class="hl-1">: </span><span class="hl-0">Song</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-0">songs</span><span class="hl-1">.</span><span class="hl-2">push</span><span class="hl-1">(</span><span class="hl-0">newSong</span><span class="hl-1">.</span><span class="hl-2">getName</span><span class="hl-1">());</span><br/><span class="hl-1">}</span>
</code></pre>
<p>También se tiene un método publico llamado same() que sirve para comparar dos géneros, devuelve true en caso afirmativo, false en el contrario. Este método es necesario mas adelante cuando es necesario comparar si dos géneros son el mismo. Por último con el método print(), se imprime por pantalla toda la información del género formateada correctamente</p>
<pre><code><span class="hl-0">public</span><span class="hl-1"> </span><span class="hl-2">same</span><span class="hl-1">(</span><span class="hl-0">genre</span><span class="hl-1">: </span><span class="hl-0">Genre</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-3">return</span><span class="hl-1"> </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">getName</span><span class="hl-1">() === </span><span class="hl-0">genre</span><span class="hl-1">.</span><span class="hl-2">getName</span><span class="hl-1">();</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-0">public</span><span class="hl-1"> </span><span class="hl-2">print</span><span class="hl-1">() {</span><br/><span class="hl-1">  </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-2">log</span><span class="hl-1">(</span><span class="hl-6">`GENERO: **</span><span class="hl-4">${</span><span class="hl-4">this</span><span class="hl-7">.</span><span class="hl-2">getName</span><span class="hl-7">()</span><span class="hl-4">}</span><span class="hl-6">**`</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">getAlbums</span><span class="hl-1">().</span><span class="hl-0">length</span><span class="hl-1"> &gt; </span><span class="hl-8">0</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-2">log</span><span class="hl-1">(</span><span class="hl-6">`</span><span class="hl-9">\t</span><span class="hl-6">Albumes: `</span><span class="hl-1">)</span><br/><span class="hl-1">      </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">getAlbums</span><span class="hl-1">().</span><span class="hl-2">forEach</span><span class="hl-1">(</span><span class="hl-0">album</span><span class="hl-1"> </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-2">log</span><span class="hl-1">(</span><span class="hl-6">`</span><span class="hl-9">\t</span><span class="hl-6">  - </span><span class="hl-4">${</span><span class="hl-0">album</span><span class="hl-4">}</span><span class="hl-6">`</span><span class="hl-1">);</span><br/><span class="hl-1">      });</span><br/><span class="hl-1">  } </span><span class="hl-3">else</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-2">log</span><span class="hl-1">(</span><span class="hl-6">`</span><span class="hl-9">\t</span><span class="hl-6">Este genero aun no tiene albumes relacionados`</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">getComponents</span><span class="hl-1">().</span><span class="hl-0">length</span><span class="hl-1"> &gt; </span><span class="hl-8">0</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-2">log</span><span class="hl-1">(</span><span class="hl-6">`</span><span class="hl-9">\t</span><span class="hl-6">Artistas Relacionados: `</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">getComponents</span><span class="hl-1">().</span><span class="hl-2">forEach</span><span class="hl-1">(</span><span class="hl-0">component</span><span class="hl-1"> </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-2">log</span><span class="hl-1">(</span><span class="hl-6">`</span><span class="hl-9">\t</span><span class="hl-6">  - </span><span class="hl-4">${</span><span class="hl-0">component</span><span class="hl-4">}</span><span class="hl-6">`</span><span class="hl-1">);</span><br/><span class="hl-1">      });</span><br/><span class="hl-1">  } </span><span class="hl-3">else</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-2">log</span><span class="hl-1">(</span><span class="hl-6">`</span><span class="hl-9">\t</span><span class="hl-6">Este genero aun no tiene artistas relacionados`</span><span class="hl-1">);</span><br/><span class="hl-1">  }   </span><br/><br/><span class="hl-1">  </span><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">getSongs</span><span class="hl-1">().</span><span class="hl-0">length</span><span class="hl-1"> &gt; </span><span class="hl-8">0</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-2">log</span><span class="hl-1">(</span><span class="hl-6">`</span><span class="hl-9">\t</span><span class="hl-6">Canciones: `</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">getSongs</span><span class="hl-1">().</span><span class="hl-2">forEach</span><span class="hl-1">(</span><span class="hl-0">song</span><span class="hl-1"> </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-2">log</span><span class="hl-1">(</span><span class="hl-6">`</span><span class="hl-9">\t</span><span class="hl-6">  - </span><span class="hl-4">${</span><span class="hl-0">song</span><span class="hl-4">}</span><span class="hl-6">`</span><span class="hl-1">);</span><br/><span class="hl-1">      });</span><br/><span class="hl-1">  } </span><span class="hl-3">else</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-2">log</span><span class="hl-1">(</span><span class="hl-6">`</span><span class="hl-9">\t</span><span class="hl-6">Este genero aun no tiene canciones asociadas`</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-2">log</span><span class="hl-1">();</span><br/><span class="hl-1">}</span>
</code></pre>
<p>A parte de la funcion de comparacion same, se ha añadido otra funcion que compruebe si un elemento ya forma parte de la clase antes de añadirlo. La funcion <code>has</code> en la clase genero, comprueba si el creador, el album o la cancion que se le quiere añadir ya se encontraba añadida o no. Para llevar a cabo esta funcion, primero se comprueba el tipo de objeto que se introduce, y en funcion del tipo de objeto, se comprueba si coincide con alguno de los elementos que la clase posee.</p>
<pre><code><span class="hl-0">public</span><span class="hl-1"> </span><span class="hl-2">has</span><span class="hl-1">(</span><span class="hl-0">element</span><span class="hl-1">: </span><span class="hl-0">Artist</span><span class="hl-1"> | </span><span class="hl-0">Group</span><span class="hl-1"> | </span><span class="hl-0">Album</span><span class="hl-1"> | </span><span class="hl-0">Song</span><span class="hl-1">): </span><span class="hl-0">boolean</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-0">element</span><span class="hl-1"> </span><span class="hl-4">instanceof</span><span class="hl-1"> (</span><span class="hl-5">Artist</span><span class="hl-1"> || </span><span class="hl-5">Group</span><span class="hl-1">)) {</span><br/><span class="hl-1">        </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">getComponents</span><span class="hl-1">().</span><span class="hl-2">forEach</span><span class="hl-1">(</span><span class="hl-0">component</span><span class="hl-1"> </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-3">if</span><span class="hl-1">(</span><span class="hl-0">component</span><span class="hl-1"> == </span><span class="hl-0">element</span><span class="hl-1">.</span><span class="hl-2">getName</span><span class="hl-1">()) {</span><br/><span class="hl-1">                </span><span class="hl-3">return</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">;</span><br/><span class="hl-1">            }</span><br/><span class="hl-1">        });</span><br/><span class="hl-1">    } </span><span class="hl-3">else</span><span class="hl-1"> </span><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-0">element</span><span class="hl-1"> </span><span class="hl-4">instanceof</span><span class="hl-1"> </span><span class="hl-5">Album</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">getAlbums</span><span class="hl-1">().</span><span class="hl-2">forEach</span><span class="hl-1">(</span><span class="hl-0">album</span><span class="hl-1"> </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-0">album</span><span class="hl-1"> == </span><span class="hl-0">element</span><span class="hl-1">.</span><span class="hl-2">getName</span><span class="hl-1">()) {</span><br/><span class="hl-1">                </span><span class="hl-3">return</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">;</span><br/><span class="hl-1">            }</span><br/><span class="hl-1">        });</span><br/><span class="hl-1">    } </span><span class="hl-3">else</span><span class="hl-1"> </span><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-0">element</span><span class="hl-1"> </span><span class="hl-4">instanceof</span><span class="hl-1"> </span><span class="hl-5">Song</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">getSongs</span><span class="hl-1">().</span><span class="hl-2">forEach</span><span class="hl-1">(</span><span class="hl-0">song</span><span class="hl-1"> </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-0">song</span><span class="hl-1"> == </span><span class="hl-0">element</span><span class="hl-1">.</span><span class="hl-2">getName</span><span class="hl-1">()) {</span><br/><span class="hl-1">                </span><span class="hl-3">return</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">;</span><br/><span class="hl-1">            }</span><br/><span class="hl-1">        });</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><br/><span class="hl-1">    </span><span class="hl-3">return</span><span class="hl-1"> </span><span class="hl-4">false</span><span class="hl-1">;</span><br/><span class="hl-1">}</span>
</code></pre>
<p>Por otra parete, para permitir la conversión de los datos de la base de datos con el formato json, al tipo de objeto de nuestra clase, se implementa la función <code>deserialize</code>. Esta función recibe por parametros un conjunto de objetos de tipo género, pero, para evitar errores, la funcion construye nuevamente cada objeto, devolviendo así, un array de tipo género puro.</p>
<p>  public static deserialize(genres: Genre[]): Genre[] {
        const myGenres: Genre[] = [];</p>
<pre><code><span class="hl-1">    </span><span class="hl-0">genres</span><span class="hl-1">.</span><span class="hl-2">forEach</span><span class="hl-1">((</span><span class="hl-0">genre</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-10">myGenre</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-2">Genre</span><span class="hl-1">(</span><span class="hl-0">genre</span><span class="hl-1">.</span><span class="hl-0">name</span><span class="hl-1">, </span><span class="hl-0">genre</span><span class="hl-1">.</span><span class="hl-0">components</span><span class="hl-1">, </span><span class="hl-0">genre</span><span class="hl-1">.</span><span class="hl-0">albums</span><span class="hl-1">, </span><span class="hl-0">genre</span><span class="hl-1">.</span><span class="hl-0">songs</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-0">myGenres</span><span class="hl-1">.</span><span class="hl-2">push</span><span class="hl-1">(</span><span class="hl-0">myGenre</span><span class="hl-1">);</span><br/><span class="hl-1">    });</span><br/><br/><span class="hl-1">    </span><span class="hl-3">return</span><span class="hl-1"> </span><span class="hl-0">myGenres</span><span class="hl-1">;</span><br/><span class="hl-1">} </span>
</code></pre>
<p>Con intención de sintetizar este informe, de las clases Artist, Group, Song y Album únicamente vamos a comentar sus atributos privados que si son exclusivos de cada clase, ya sus métodos siguen el mismo esquema que en la clase Genre. Un getter para cada uno de ellos y métodos para actualizarlos, además de los métodos print y same que tienen la misma función que la descrita en la clase Genre. </p>

<a href="#clase-artist" id="clase-artist" style="color: inherit; text-decoration: none;">
  <h3>Clase Artist</h3>
</a>
<p>La clase Artist tiene los siguientes atributos privados:</p>
<ul>
<li>genres, de tipo Array<Genre> que guarda todos los géneros de los que el artista ha sacado una canción.</li>
<li>listeners, de tipo number donde se guardan la cantidad de oyentes que tiene el artista, se calcula sumando todos los oyentes de sus canciones.</li>
<li>groups, de tipo Array<Group> con todos los grupos de los que el artista es miembro.</li>
<li>albums, un Array<Album> con todos los albums que ha lanzado el artista.</li>
<li>songs, de tipos Array<Song> donde se guardan todas las canciones que ha sacado el artista.</li>
<li>name, un string con el nombre del artista.</li>
</ul>
<p>Desde el constructor de la función únicamente se recibe el nombre del artista ya que el resto de atributos se van actualizando a medida se añaden canciones, grupos etc. a la base de datos mediante los métodos de actualización comentados previamente.</p>
<pre><code><span class="hl-3">export</span><span class="hl-1"> </span><span class="hl-4">class</span><span class="hl-1"> </span><span class="hl-5">Artist</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">constructor</span><span class="hl-1">(</span><br/><span class="hl-1">    </span><span class="hl-4">private</span><span class="hl-1"> </span><span class="hl-0">name</span><span class="hl-1">: </span><span class="hl-5">string</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">private</span><span class="hl-1"> </span><span class="hl-0">genres</span><span class="hl-1">: </span><span class="hl-5">Array</span><span class="hl-1">&lt;</span><span class="hl-5">string</span><span class="hl-1">&gt; = [],</span><br/><span class="hl-1">    </span><span class="hl-4">private</span><span class="hl-1"> </span><span class="hl-0">listeners</span><span class="hl-1">: </span><span class="hl-5">number</span><span class="hl-1"> = </span><span class="hl-8">0</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">private</span><span class="hl-1"> </span><span class="hl-0">groups</span><span class="hl-1">: </span><span class="hl-5">Array</span><span class="hl-1">&lt;</span><span class="hl-5">string</span><span class="hl-1">&gt; = [],</span><br/><span class="hl-1">    </span><span class="hl-4">private</span><span class="hl-1"> </span><span class="hl-0">albums</span><span class="hl-1">: </span><span class="hl-5">Array</span><span class="hl-1">&lt;</span><span class="hl-5">string</span><span class="hl-1">&gt; = [],</span><br/><span class="hl-1">    </span><span class="hl-4">private</span><span class="hl-1"> </span><span class="hl-0">songs</span><span class="hl-1">: </span><span class="hl-5">Array</span><span class="hl-1">&lt;</span><span class="hl-5">string</span><span class="hl-1">&gt; = [],</span><br/><span class="hl-1">  ) {} </span>
</code></pre>

<a href="#clase-song" id="clase-song" style="color: inherit; text-decoration: none;">
  <h3>Clase Song</h3>
</a>
<p>La clase tiene los siguientes atributos privados: </p>
<ul>
<li>name, de tipo string que almacena el nombre de la canción. </li>
<li>creator, de tipo Artist | Group, donde se guarda el creador de la canción ya sea un artista o un grupo. </li>
<li>isSingel, de tipo booleam donde se guarda si la canción es un single, true en caso afirmativo, false en el contrario. </li>
<li>genre, de tipo Genre donde se almacena el género de la canción. </li>
<li>timesListened, de tipo number que almacena las veces que ha sido escuchada la canción. </li>
<li>duration de tipo Time que guarda la duración de la canción en segundos, minutos y horas.</li>
</ul>
<p>El constructor de esta clase recibe todos sus atributos excepto duration, en vez de el, se recibe un number con la duración en segundos y a partir de el se calcula el resto de parámetros del tipo time.</p>
<pre><code><span class="hl-3">export</span><span class="hl-1"> </span><span class="hl-4">class</span><span class="hl-1"> </span><span class="hl-5">Song</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">private</span><span class="hl-1"> </span><span class="hl-0">duration</span><span class="hl-1">: </span><span class="hl-5">Time</span><span class="hl-1">;</span><br/><br/><span class="hl-1">    </span><span class="hl-4">constructor</span><span class="hl-1">(</span><br/><span class="hl-1">        </span><span class="hl-4">private</span><span class="hl-1"> </span><span class="hl-0">name</span><span class="hl-1">: </span><span class="hl-5">string</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">private</span><span class="hl-1"> </span><span class="hl-0">creator</span><span class="hl-1">: </span><span class="hl-5">string</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">private</span><span class="hl-1"> </span><span class="hl-0">genre</span><span class="hl-1">: </span><span class="hl-5">string</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">private</span><span class="hl-1"> </span><span class="hl-0">isSingle</span><span class="hl-1">: </span><span class="hl-5">boolean</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">private</span><span class="hl-1"> </span><span class="hl-0">timesListened</span><span class="hl-1">: </span><span class="hl-5">number</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-0">durationInSeconds</span><span class="hl-1">: </span><span class="hl-5">number</span><span class="hl-1">,</span><br/><span class="hl-1">    ) {</span><br/><span class="hl-1">        </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-0">duration</span><span class="hl-1"> = {</span><span class="hl-0">hours:</span><span class="hl-1"> </span><span class="hl-0">durationInSeconds</span><span class="hl-1"> / </span><span class="hl-8">3600</span><span class="hl-1">, </span><span class="hl-0">minutes:</span><span class="hl-1"> </span><span class="hl-0">durationInSeconds</span><span class="hl-1"> / </span><span class="hl-8">60</span><span class="hl-1">, </span><span class="hl-0">seconds:</span><span class="hl-1"> </span><span class="hl-0">durationInSeconds</span><span class="hl-1">}</span><br/><span class="hl-1">    }</span>
</code></pre>

<a href="#clase-group" id="clase-group" style="color: inherit; text-decoration: none;">
  <h3>Clase Group</h3>
</a>
<p>La clase Group, tiene los siguientes atribustos privados:</p>
<ul>
<li>genres, un Array<Genre> donde se almacenan los géneros de los que el grupo ha sacado alguna canción. </li>
<li>albums, un Array<Albums> donde se almacenan los albumsque el grupo ha lanzado.</li>
<li>songs, un Array<Song> donde se guardan las canciones que el grupo ha sacado. </li>
<li>name, de tipo string  donde se guarda el nombre del grupo. </li>
<li>year, de tipo number con el año de creación del grupo. </li>
<li>listeners, de tipo number donde se guarda el número de veces que se ha escuchado el grupo. Se calcula a partir de todas las canciones relacionadas al grupo.</li>
<li>artists, de tipo Array<Artist> donde se alamcenan los aritstas que componen el grupo.</li>
</ul>
<p>En el constructor de esta clase, se reciben los parámeteros name, year, artist y listeners. El resto de atributos, se van actualizando a medida que se añaden nuevas canciones, ábunes etc. a la base de datos. </p>
<pre><code><span class="hl-3">export</span><span class="hl-1"> </span><span class="hl-4">class</span><span class="hl-1"> </span><span class="hl-5">Group</span><span class="hl-1"> {</span><br/><br/><span class="hl-1">    </span><span class="hl-4">constructor</span><span class="hl-1">(</span><br/><span class="hl-1">        </span><span class="hl-4">private</span><span class="hl-1"> </span><span class="hl-0">name</span><span class="hl-1">: </span><span class="hl-5">string</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">private</span><span class="hl-1"> </span><span class="hl-0">year</span><span class="hl-1">: </span><span class="hl-5">number</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">private</span><span class="hl-1"> </span><span class="hl-0">artists</span><span class="hl-1">: </span><span class="hl-5">Array</span><span class="hl-1">&lt;</span><span class="hl-5">string</span><span class="hl-1">&gt;,</span><br/><span class="hl-1">        </span><span class="hl-4">private</span><span class="hl-1"> </span><span class="hl-0">listeners</span><span class="hl-1">: </span><span class="hl-5">number</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">private</span><span class="hl-1"> </span><span class="hl-0">genres</span><span class="hl-1">: </span><span class="hl-5">Array</span><span class="hl-1">&lt;</span><span class="hl-5">string</span><span class="hl-1">&gt; = [],</span><br/><span class="hl-1">        </span><span class="hl-4">private</span><span class="hl-1"> </span><span class="hl-0">albums</span><span class="hl-1">: </span><span class="hl-5">Array</span><span class="hl-1">&lt;</span><span class="hl-5">string</span><span class="hl-1">&gt; = [],</span><br/><span class="hl-1">        </span><span class="hl-4">private</span><span class="hl-1"> </span><span class="hl-0">songs</span><span class="hl-1">: </span><span class="hl-5">Array</span><span class="hl-1">&lt;</span><span class="hl-5">string</span><span class="hl-1">&gt; = [],</span><br/><span class="hl-1">    ) {}  </span>
</code></pre>

<a href="#clase-album" id="clase-album" style="color: inherit; text-decoration: none;">
  <h3>Clase Album</h3>
</a>
<p>La clase álbum, tiene los siguientes atributos privados:</p>
<ul>
<li><p>name. de tipo string que guarda el nombre del álbum. </p>
</li>
<li><p>creator, de tipo Artist | Group, donde se almacena el creador del álbum ya sea un artista individual o un grupo. </p>
</li>
<li><p>genres, de tipo Array<Genre> donde se guardan todos los géneros del álbum. </p>
</li>
<li><p>year, de tipo number donde se almacena el año de lanzamiento del disco. </p>
</li>
<li><p>songs, de tipo Array<Songs> que guarda todas las canciones del álbum. </p>
<p>export class Group {
constructor(
    private name: string,
    private year: number,
    private artists: Array<string>,
    private listeners: number,
    private genres: Array<string> = [],
    private albums: Array<string> = [],
    private songs: Array<string> = [],
) {}</p>
</li>
</ul>
<p>Para almacenar toda la información hemos creado la clase musicDataBase. Esta clase contiene un objeto LowdbSync, el cual almacena en un fichero .json la información que indiquemos. En nuestro caso este fichero json se almacena en el directorio /database de nuestro proyecto. A esta base de datos hay que declararle un esquema, nosotros tenemos un array para cada elemento que vamos a almacenar alli, canciones, albums, artistas, grupos, géneros y playlists</p>
<pre><code><span class="hl-4">type</span><span class="hl-1"> </span><span class="hl-5">schemaType</span><span class="hl-1"> = {</span><br/><span class="hl-1">    </span><span class="hl-0">albums</span><span class="hl-1">: </span><span class="hl-5">Array</span><span class="hl-1">&lt;</span><span class="hl-5">Album</span><span class="hl-1">&gt;,</span><br/><span class="hl-1">    </span><span class="hl-0">artists</span><span class="hl-1">: </span><span class="hl-5">Array</span><span class="hl-1">&lt;</span><span class="hl-5">Artist</span><span class="hl-1">&gt;,</span><br/><span class="hl-1">    </span><span class="hl-0">groups</span><span class="hl-1">: </span><span class="hl-5">Array</span><span class="hl-1">&lt;</span><span class="hl-5">Group</span><span class="hl-1">&gt;,</span><br/><span class="hl-1">    </span><span class="hl-0">genres</span><span class="hl-1">: </span><span class="hl-5">Array</span><span class="hl-1">&lt;</span><span class="hl-5">Genre</span><span class="hl-1">&gt;,</span><br/><span class="hl-1">    </span><span class="hl-0">songs</span><span class="hl-1">: </span><span class="hl-5">Array</span><span class="hl-1"> &lt;</span><span class="hl-5">Song</span><span class="hl-1">&gt;,</span><br/><span class="hl-1">    </span><span class="hl-0">playlists</span><span class="hl-1">: </span><span class="hl-5">Array</span><span class="hl-1">&lt;</span><span class="hl-5">Playlist</span><span class="hl-1">&gt;</span><br/><span class="hl-1">}</span><br/><br/><br/><span class="hl-3">export</span><span class="hl-1"> </span><span class="hl-4">class</span><span class="hl-1"> </span><span class="hl-5">MusicDataBase</span><span class="hl-1"> {</span><br/><br/><span class="hl-1">    </span><span class="hl-4">private</span><span class="hl-1"> </span><span class="hl-0">db</span><span class="hl-1">: </span><span class="hl-5">lowdb</span><span class="hl-1">.</span><span class="hl-5">LowdbSync</span><span class="hl-1">&lt;</span><span class="hl-5">schemaType</span><span class="hl-1">&gt;;</span><br/><span class="hl-1">    </span><br/><span class="hl-1">...</span><br/><span class="hl-1">}</span>
</code></pre>
<p>En el constructor, únicamente indicamos el fichero en el que se encuentra el .json y hemos hecho que si la base de datos está vacía se inicialice con vectores vacíos y rellenar estos con información por defecto. Esta información por defecto se carga a través de unas funciones llamadas defaultX y añade a la base de datos una serie de géneros, canciones, artistas... para que no esté vacía.</p>
<pre><code><span class="hl-2">constructor</span><span class="hl-1">() {</span><br/><span class="hl-1">        </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-0">db</span><span class="hl-1"> = </span><span class="hl-2">lowdb</span><span class="hl-1">(</span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-2">FileSync</span><span class="hl-1">(</span><span class="hl-6">&#39;database/db.json&#39;</span><span class="hl-1">));</span><br/><span class="hl-1">        </span><br/><span class="hl-1">        </span><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-0">db</span><span class="hl-1">.</span><span class="hl-2">get</span><span class="hl-1">(</span><span class="hl-6">&quot;genres&quot;</span><span class="hl-1">).</span><span class="hl-2">value</span><span class="hl-1">() === </span><span class="hl-4">undefined</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-0">db</span><span class="hl-1">.</span><span class="hl-2">set</span><span class="hl-1">(</span><span class="hl-6">&quot;genres&quot;</span><span class="hl-1">, []).</span><span class="hl-2">write</span><span class="hl-1">();</span><br/><span class="hl-1">            </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">defaultGenres</span><span class="hl-1">();</span><br/><span class="hl-1">        }</span><br/><br/><span class="hl-1">        </span><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-0">db</span><span class="hl-1">.</span><span class="hl-2">get</span><span class="hl-1">(</span><span class="hl-6">&quot;artists&quot;</span><span class="hl-1">).</span><span class="hl-2">value</span><span class="hl-1">() === </span><span class="hl-4">undefined</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-0">db</span><span class="hl-1">.</span><span class="hl-2">set</span><span class="hl-1">(</span><span class="hl-6">&quot;artists&quot;</span><span class="hl-1">, []).</span><span class="hl-2">write</span><span class="hl-1">();</span><br/><span class="hl-1">            </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">defaultArtists</span><span class="hl-1">();</span><br/><span class="hl-1">        }</span><br/><br/><span class="hl-1">        </span><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-0">db</span><span class="hl-1">.</span><span class="hl-2">get</span><span class="hl-1">(</span><span class="hl-6">&quot;groups&quot;</span><span class="hl-1">).</span><span class="hl-2">value</span><span class="hl-1">() === </span><span class="hl-4">undefined</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-0">db</span><span class="hl-1">.</span><span class="hl-2">set</span><span class="hl-1">(</span><span class="hl-6">&quot;groups&quot;</span><span class="hl-1">, []).</span><span class="hl-2">write</span><span class="hl-1">();</span><br/><span class="hl-1">            </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">defaultGroups</span><span class="hl-1">();</span><br/><span class="hl-1">        }</span><br/><br/><span class="hl-1">        </span><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-0">db</span><span class="hl-1">.</span><span class="hl-2">get</span><span class="hl-1">(</span><span class="hl-6">&quot;songs&quot;</span><span class="hl-1">).</span><span class="hl-2">value</span><span class="hl-1">() === </span><span class="hl-4">undefined</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-0">db</span><span class="hl-1">.</span><span class="hl-2">set</span><span class="hl-1">(</span><span class="hl-6">&quot;songs&quot;</span><span class="hl-1">, []).</span><span class="hl-2">write</span><span class="hl-1">();</span><br/><span class="hl-1">            </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">defaultSongs</span><span class="hl-1">();</span><br/><span class="hl-1">        }</span><br/><br/><span class="hl-1">        </span><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-0">db</span><span class="hl-1">.</span><span class="hl-2">get</span><span class="hl-1">(</span><span class="hl-6">&quot;albums&quot;</span><span class="hl-1">).</span><span class="hl-2">value</span><span class="hl-1">() === </span><span class="hl-4">undefined</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-0">db</span><span class="hl-1">.</span><span class="hl-2">set</span><span class="hl-1">(</span><span class="hl-6">&quot;albums&quot;</span><span class="hl-1">, []).</span><span class="hl-2">write</span><span class="hl-1">();</span><br/><span class="hl-1">            </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">defaultAlbums</span><span class="hl-1">();</span><br/><span class="hl-1">        }</span><br/><br/><span class="hl-1">        </span><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-0">db</span><span class="hl-1">.</span><span class="hl-2">get</span><span class="hl-1">(</span><span class="hl-6">&quot;playlists&quot;</span><span class="hl-1">).</span><span class="hl-2">value</span><span class="hl-1">() === </span><span class="hl-4">undefined</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-0">db</span><span class="hl-1">.</span><span class="hl-2">set</span><span class="hl-1">(</span><span class="hl-6">&quot;playlists&quot;</span><span class="hl-1">, []).</span><span class="hl-2">write</span><span class="hl-1">();</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">    }</span>
</code></pre>
<p>Para poder obtener cada uno de los atributos guardados en la base de datos se han desarrollado las siguientes funciones, que a traves de la funcion deserialize propia de cada clase devuelve el objeto correspondiente.</p>
<p>Para obtener las canciones, albumes, artistas, generos y grupos, se lleva a cabo el mismo protocolo, en el que se almacena la informacion de la base de datos en una variable. Luego, empleamos la funcion deserialize, que transforma los datos del tipo json al objeto que necesitamos. Y finalmente, se devuelve este objeto deserializado.</p>
<pre><code><span class="hl-0">public</span><span class="hl-1"> </span><span class="hl-2">getSongs</span><span class="hl-1">(): </span><span class="hl-5">Array</span><span class="hl-1">&lt;</span><span class="hl-0">Song</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">    const </span><span class="hl-0">serializedSongs</span><span class="hl-1"> = </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-0">db</span><span class="hl-1">.</span><span class="hl-2">get</span><span class="hl-1">(</span><span class="hl-6">&#39;songs&#39;</span><span class="hl-1">).</span><span class="hl-2">value</span><span class="hl-1">();</span><br/><span class="hl-1">    const </span><span class="hl-0">mySongs</span><span class="hl-1"> = </span><span class="hl-0">Song</span><span class="hl-1">.</span><span class="hl-2">deserialize</span><span class="hl-1">(</span><span class="hl-0">serializedSongs</span><span class="hl-1">);</span><br/><span class="hl-1">    return mySongs;</span><br/><span class="hl-1">}</span><br/><br/><br/><br/><span class="hl-0">public</span><span class="hl-1"> </span><span class="hl-2">getAlbums</span><span class="hl-1">(): </span><span class="hl-5">Array</span><span class="hl-1">&lt;</span><span class="hl-0">Album</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">    const </span><span class="hl-0">serializedAlbums</span><span class="hl-1"> = </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-0">db</span><span class="hl-1">.</span><span class="hl-2">get</span><span class="hl-1">(</span><span class="hl-6">&#39;albums&#39;</span><span class="hl-1">).</span><span class="hl-2">value</span><span class="hl-1">();</span><br/><span class="hl-1">    const </span><span class="hl-0">myAlbums</span><span class="hl-1"> = </span><span class="hl-0">Album</span><span class="hl-1">.</span><span class="hl-2">deserialize</span><span class="hl-1">(</span><span class="hl-0">serializedAlbums</span><span class="hl-1">);</span><br/><span class="hl-1">    return myAlbums;</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-0">public</span><span class="hl-1"> </span><span class="hl-2">getArtists</span><span class="hl-1">(): </span><span class="hl-5">Array</span><span class="hl-1">&lt;</span><span class="hl-0">Artist</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">    const </span><span class="hl-0">serializedArtists</span><span class="hl-1"> = </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-0">db</span><span class="hl-1">.</span><span class="hl-2">get</span><span class="hl-1">(</span><span class="hl-6">&#39;artists&#39;</span><span class="hl-1">).</span><span class="hl-2">value</span><span class="hl-1">();</span><br/><span class="hl-1">    const </span><span class="hl-0">myArtists</span><span class="hl-1"> = </span><span class="hl-0">Artist</span><span class="hl-1">.</span><span class="hl-2">deserialize</span><span class="hl-1">(</span><span class="hl-0">serializedArtists</span><span class="hl-1">);</span><br/><span class="hl-1">    return myArtists;</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-0">public</span><span class="hl-1"> </span><span class="hl-2">getGroups</span><span class="hl-1">(): </span><span class="hl-5">Array</span><span class="hl-1">&lt;</span><span class="hl-0">Group</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">    const </span><span class="hl-0">serializedGroups</span><span class="hl-1"> = </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-0">db</span><span class="hl-1">.</span><span class="hl-2">get</span><span class="hl-1">(</span><span class="hl-6">&#39;groups&#39;</span><span class="hl-1">).</span><span class="hl-2">value</span><span class="hl-1">();</span><br/><span class="hl-1">    const </span><span class="hl-0">myGroups</span><span class="hl-1"> = </span><span class="hl-0">Group</span><span class="hl-1">.</span><span class="hl-2">deserialize</span><span class="hl-1">(</span><span class="hl-0">serializedGroups</span><span class="hl-1">);</span><br/><span class="hl-1">    return myGroups;</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-0">public</span><span class="hl-1"> </span><span class="hl-2">getGenres</span><span class="hl-1">(): </span><span class="hl-5">Array</span><span class="hl-1">&lt;</span><span class="hl-0">Genre</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">    const </span><span class="hl-0">serializedGenres</span><span class="hl-1"> = </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-0">db</span><span class="hl-1">.</span><span class="hl-2">get</span><span class="hl-1">(</span><span class="hl-6">&#39;genres&#39;</span><span class="hl-1">).</span><span class="hl-2">value</span><span class="hl-1">();</span><br/><span class="hl-1">    const </span><span class="hl-0">myGenre</span><span class="hl-1"> = </span><span class="hl-0">Genre</span><span class="hl-1">.</span><span class="hl-2">deserialize</span><span class="hl-1">(</span><span class="hl-0">serializedGenres</span><span class="hl-1">);</span><br/><span class="hl-1">    return myGenre;</span><br/><span class="hl-1">}</span>
</code></pre>
<p>Por otra parte, para las playlist, tenemos en cuenta el usuario. Por lo tanto, además, se realiza un filtrado de los datos de tipo playlist en caso de que sea necesario.</p>
<pre><code><span class="hl-0">public</span><span class="hl-1"> </span><span class="hl-2">getPlaylists</span><span class="hl-1">(</span><span class="hl-0">user</span><span class="hl-1">: </span><span class="hl-0">string</span><span class="hl-1"> = </span><span class="hl-6">&#39;&#39;</span><span class="hl-1">):</span><span class="hl-5">Array</span><span class="hl-1">&lt;</span><span class="hl-0">Playlist</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">    const </span><span class="hl-0">serializedPlaylist</span><span class="hl-1"> = </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-0">db</span><span class="hl-1">.</span><span class="hl-2">get</span><span class="hl-1">(</span><span class="hl-6">&#39;playlists&#39;</span><span class="hl-1">).</span><span class="hl-2">value</span><span class="hl-1">();</span><br/><span class="hl-1">    const </span><span class="hl-0">myPlaylist</span><span class="hl-1"> = </span><span class="hl-0">Playlist</span><span class="hl-1">.</span><span class="hl-2">deserialize</span><span class="hl-1">(</span><span class="hl-0">serializedPlaylist</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-2">if</span><span class="hl-1"> (</span><span class="hl-0">user</span><span class="hl-1"> === </span><span class="hl-6">&#39;&#39;</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-3">return</span><span class="hl-1"> </span><span class="hl-0">myPlaylist</span><span class="hl-1">;</span><br/><span class="hl-1">    } else {</span><br/><span class="hl-1">        let </span><span class="hl-0">userPlaylist:</span><span class="hl-1"> </span><span class="hl-5">Array</span><span class="hl-1">&lt;</span><span class="hl-0">Playlist</span><span class="hl-1">&gt; = [];</span><br/><span class="hl-1">        </span><span class="hl-0">myPlaylist</span><span class="hl-1">.</span><span class="hl-2">forEach</span><span class="hl-1">(</span><span class="hl-0">playlist</span><span class="hl-1"> </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-0">playlist</span><span class="hl-1">.</span><span class="hl-2">getUser</span><span class="hl-1">() === </span><span class="hl-0">user</span><span class="hl-1">) {</span><br/><span class="hl-1">                </span><span class="hl-0">userPlaylist</span><span class="hl-1">.</span><span class="hl-2">push</span><span class="hl-1">(</span><span class="hl-0">playlist</span><span class="hl-1">);</span><br/><span class="hl-1">            }</span><br/><span class="hl-1">        });</span><br/><span class="hl-1">        </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-0">userPlaylist</span><span class="hl-1">;</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">}</span>
</code></pre>
<p>Cada atributo de la base de datos tiene un método para añadir información. Para añadir un género tenemos la función addGenre(), la cual recibe un objeto de la clase Genre por parámetro y la añade a la base de datos de la siguiente manera</p>
<pre><code><span class="hl-0">public</span><span class="hl-1"> </span><span class="hl-2">addGenre</span><span class="hl-1">(</span><span class="hl-0">newGenre</span><span class="hl-1">: </span><span class="hl-0">Genre</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-0">db</span><span class="hl-1">.</span><span class="hl-2">get</span><span class="hl-1">(</span><span class="hl-6">&#39;genres&#39;</span><span class="hl-1">).</span><span class="hl-2">push</span><span class="hl-1">(</span><span class="hl-0">newGenre</span><span class="hl-1">).</span><span class="hl-2">write</span><span class="hl-1">();</span><br/><span class="hl-1">}</span>
</code></pre>
<p>Para añadir un artista, el método addArtist() funciona de una manera similar</p>
<pre><code><span class="hl-0">public</span><span class="hl-1"> </span><span class="hl-2">addArtist</span><span class="hl-1">(</span><span class="hl-0">newArtist</span><span class="hl-1">: </span><span class="hl-0">Artist</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-0">db</span><span class="hl-1">.</span><span class="hl-2">get</span><span class="hl-1">(</span><span class="hl-6">&#39;artists&#39;</span><span class="hl-1">).</span><span class="hl-2">push</span><span class="hl-1">(</span><span class="hl-0">newArtist</span><span class="hl-1">).</span><span class="hl-2">write</span><span class="hl-1">();</span><br/><span class="hl-1">}</span>
</code></pre>
<p>Para añadir un nuevo grupo, usamos el método addGroup(), se recibe un grupo por parámetro y se añade a la base de datos pero además, se realiza una búsqueda entre los artistas de la base de datos y a los que pertenezcan al nuevo grupo, se les actualiza su información para que el propio artista guarde en su atributo albums su pertenencia al nuevo grupo.</p>
<pre><code><span class="hl-0">public</span><span class="hl-1"> </span><span class="hl-2">addGroup</span><span class="hl-1">(</span><span class="hl-0">newGroup</span><span class="hl-1">: </span><span class="hl-0">Group</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-0">db</span><span class="hl-1">.</span><span class="hl-2">get</span><span class="hl-1">(</span><span class="hl-6">&#39;groups&#39;</span><span class="hl-1">).</span><span class="hl-2">push</span><span class="hl-1">(</span><span class="hl-0">newGroup</span><span class="hl-1">).</span><span class="hl-2">write</span><span class="hl-1">();</span><br/><br/><span class="hl-1">    </span><span class="hl-4">let</span><span class="hl-1"> </span><span class="hl-0">artists</span><span class="hl-1">: </span><span class="hl-5">Array</span><span class="hl-1">&lt;</span><span class="hl-5">string</span><span class="hl-1">&gt; = </span><span class="hl-0">newGroup</span><span class="hl-1">.</span><span class="hl-2">getArtist</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-4">let</span><span class="hl-1"> </span><span class="hl-0">dbArtists</span><span class="hl-1">: </span><span class="hl-5">Array</span><span class="hl-1">&lt;</span><span class="hl-5">Artist</span><span class="hl-1">&gt; = </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">getArtists</span><span class="hl-1">();</span><br/><br/><span class="hl-1">    </span><span class="hl-0">dbArtists</span><span class="hl-1">.</span><span class="hl-2">forEach</span><span class="hl-1">((</span><span class="hl-0">artist1</span><span class="hl-1">: </span><span class="hl-5">Artist</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-0">artists</span><span class="hl-1">.</span><span class="hl-2">forEach</span><span class="hl-1">((</span><span class="hl-0">artist2</span><span class="hl-1">: </span><span class="hl-5">string</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-0">artist1</span><span class="hl-1">.</span><span class="hl-2">getName</span><span class="hl-1">() === </span><span class="hl-0">artist2</span><span class="hl-1">) {</span><br/><span class="hl-1">                </span><span class="hl-0">artist1</span><span class="hl-1">.</span><span class="hl-2">addGroup</span><span class="hl-1">(</span><span class="hl-0">newGroup</span><span class="hl-1">);</span><br/><span class="hl-1">            }</span><br/><span class="hl-1">        });</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">    </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-0">db</span><span class="hl-1">.</span><span class="hl-2">set</span><span class="hl-1">(</span><span class="hl-6">&#39;artists&#39;</span><span class="hl-1">, </span><span class="hl-0">dbArtists</span><span class="hl-1">).</span><span class="hl-2">write</span><span class="hl-1">();</span><br/><span class="hl-1">}</span>
</code></pre>
<p>Para añadir un album, tenemos la función addAlbum(), al igual que con el método anterior hay que actualizar la información de los artistas, géneros y grupos relacionados con el album para añadirles este album dentro de sus atributos internos. En el caso de los 3, se les añade el nombre del nuevo album a los atributos albums de cada clase.</p>
<pre><code><span class="hl-0">public</span><span class="hl-1"> </span><span class="hl-2">addAlbum</span><span class="hl-1">(</span><span class="hl-0">newAlbum</span><span class="hl-1">: </span><span class="hl-0">Album</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-0">db</span><span class="hl-1">.</span><span class="hl-2">get</span><span class="hl-1">(</span><span class="hl-6">&#39;albums&#39;</span><span class="hl-1">).</span><span class="hl-2">push</span><span class="hl-1">(</span><span class="hl-0">newAlbum</span><span class="hl-1">).</span><span class="hl-2">write</span><span class="hl-1">();</span><br/><br/><span class="hl-1">    </span><span class="hl-4">let</span><span class="hl-1"> </span><span class="hl-0">artistsUpdated</span><span class="hl-1">: </span><span class="hl-5">Array</span><span class="hl-1">&lt;</span><span class="hl-5">Artist</span><span class="hl-1">&gt; = </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">getArtists</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-0">artistsUpdated</span><span class="hl-1">.</span><span class="hl-2">forEach</span><span class="hl-1">((</span><span class="hl-0">artist</span><span class="hl-1">: </span><span class="hl-5">Artist</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-3">if</span><span class="hl-1">(</span><span class="hl-0">artist</span><span class="hl-1">.</span><span class="hl-2">getName</span><span class="hl-1">() === </span><span class="hl-0">newAlbum</span><span class="hl-1">.</span><span class="hl-2">getCreator</span><span class="hl-1">()) {</span><br/><span class="hl-1">            </span><span class="hl-0">artist</span><span class="hl-1">.</span><span class="hl-2">addAlbum</span><span class="hl-1">(</span><span class="hl-0">newAlbum</span><span class="hl-1">);</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">    </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-0">db</span><span class="hl-1">.</span><span class="hl-2">set</span><span class="hl-1">(</span><span class="hl-6">&#39;artists&#39;</span><span class="hl-1">, </span><span class="hl-0">artistsUpdated</span><span class="hl-1">).</span><span class="hl-2">write</span><span class="hl-1">();</span><br/><br/><br/><span class="hl-1">    </span><span class="hl-4">let</span><span class="hl-1"> </span><span class="hl-0">groupsUpdated</span><span class="hl-1">: </span><span class="hl-5">Array</span><span class="hl-1">&lt;</span><span class="hl-5">Group</span><span class="hl-1">&gt; = </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">getGroups</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-0">groupsUpdated</span><span class="hl-1">.</span><span class="hl-2">forEach</span><span class="hl-1">((</span><span class="hl-0">group</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-3">if</span><span class="hl-1">(</span><span class="hl-0">group</span><span class="hl-1">.</span><span class="hl-2">getName</span><span class="hl-1">() == </span><span class="hl-0">newAlbum</span><span class="hl-1">.</span><span class="hl-2">getCreator</span><span class="hl-1">()) {</span><br/><span class="hl-1">            </span><span class="hl-0">group</span><span class="hl-1">.</span><span class="hl-2">addAlbum</span><span class="hl-1">(</span><span class="hl-0">newAlbum</span><span class="hl-1">);</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">    </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-0">db</span><span class="hl-1">.</span><span class="hl-2">set</span><span class="hl-1">(</span><span class="hl-6">&#39;groups&#39;</span><span class="hl-1">, </span><span class="hl-0">groupsUpdated</span><span class="hl-1">).</span><span class="hl-2">write</span><span class="hl-1">();</span><br/><br/><span class="hl-1">    </span><span class="hl-4">let</span><span class="hl-1"> </span><span class="hl-0">genresUpdated</span><span class="hl-1">: </span><span class="hl-5">Array</span><span class="hl-1">&lt;</span><span class="hl-5">Genre</span><span class="hl-1">&gt; = </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">getGenres</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-0">genresUpdated</span><span class="hl-1">.</span><span class="hl-2">forEach</span><span class="hl-1">((</span><span class="hl-0">genre</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-3">if</span><span class="hl-1">(</span><span class="hl-0">newAlbum</span><span class="hl-1">.</span><span class="hl-2">getGenres</span><span class="hl-1">().</span><span class="hl-2">includes</span><span class="hl-1">(</span><span class="hl-0">genre</span><span class="hl-1">.</span><span class="hl-2">getName</span><span class="hl-1">())) {</span><br/><span class="hl-1">            </span><span class="hl-0">genre</span><span class="hl-1">.</span><span class="hl-2">addAlbum</span><span class="hl-1">(</span><span class="hl-0">newAlbum</span><span class="hl-1">.</span><span class="hl-2">getName</span><span class="hl-1">());</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">    </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-0">db</span><span class="hl-1">.</span><span class="hl-2">set</span><span class="hl-1">(</span><span class="hl-6">&#39;genres&#39;</span><span class="hl-1">, </span><span class="hl-0">genresUpdated</span><span class="hl-1">).</span><span class="hl-2">write</span><span class="hl-1">();</span><br/><span class="hl-1">}</span>
</code></pre>
<p>Por último para añadir una canción usamos el método addSong(), y ocurre igual que antes. Hay que acceder al artista o grupo creador de la canción y actualizar sus atributos de canciones, géneros relacionados y oyentes. También hay que añadir la canción al género para que se guarde en su atributo songs.</p>
<pre><code><span class="hl-0">public</span><span class="hl-1"> </span><span class="hl-2">addSong</span><span class="hl-1">(</span><span class="hl-0">newSong</span><span class="hl-1">: </span><span class="hl-0">Song</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-0">db</span><span class="hl-1">.</span><span class="hl-2">get</span><span class="hl-1">(</span><span class="hl-6">&#39;songs&#39;</span><span class="hl-1">).</span><span class="hl-2">push</span><span class="hl-1">(</span><span class="hl-0">newSong</span><span class="hl-1">).</span><span class="hl-2">write</span><span class="hl-1">();</span><br/><br/><span class="hl-1">    </span><span class="hl-4">let</span><span class="hl-1"> </span><span class="hl-0">artistsUpdated</span><span class="hl-1">: </span><span class="hl-5">Array</span><span class="hl-1">&lt;</span><span class="hl-5">Artist</span><span class="hl-1">&gt; = </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">getArtists</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-0">artistsUpdated</span><span class="hl-1">.</span><span class="hl-2">forEach</span><span class="hl-1">((</span><span class="hl-0">artist</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-3">if</span><span class="hl-1">(</span><span class="hl-0">artist</span><span class="hl-1">.</span><span class="hl-2">getName</span><span class="hl-1">() == </span><span class="hl-0">newSong</span><span class="hl-1">.</span><span class="hl-2">getCreator</span><span class="hl-1">()) {</span><br/><span class="hl-1">            </span><span class="hl-0">artist</span><span class="hl-1">.</span><span class="hl-2">addSong</span><span class="hl-1">(</span><span class="hl-0">newSong</span><span class="hl-1">);</span><br/><span class="hl-1">            </span><span class="hl-0">artist</span><span class="hl-1">.</span><span class="hl-2">addGenre</span><span class="hl-1">(</span><span class="hl-0">newSong</span><span class="hl-1">.</span><span class="hl-2">getGenre</span><span class="hl-1">());</span><br/><span class="hl-1">            </span><span class="hl-0">artist</span><span class="hl-1">.</span><span class="hl-2">updateListeners</span><span class="hl-1">(</span><span class="hl-0">newSong</span><span class="hl-1">.</span><span class="hl-2">getTimesListened</span><span class="hl-1">())</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">    </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-0">db</span><span class="hl-1">.</span><span class="hl-2">set</span><span class="hl-1">(</span><span class="hl-6">&#39;artists&#39;</span><span class="hl-1">, </span><span class="hl-0">artistsUpdated</span><span class="hl-1">).</span><span class="hl-2">write</span><span class="hl-1">();</span><br/><br/><br/><span class="hl-1">    </span><span class="hl-4">let</span><span class="hl-1"> </span><span class="hl-0">groupsUpdated</span><span class="hl-1">: </span><span class="hl-5">Array</span><span class="hl-1">&lt;</span><span class="hl-5">Group</span><span class="hl-1">&gt; = </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">getGroups</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-0">groupsUpdated</span><span class="hl-1">.</span><span class="hl-2">forEach</span><span class="hl-1">((</span><span class="hl-0">group</span><span class="hl-1">: </span><span class="hl-5">Group</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-3">if</span><span class="hl-1">(</span><span class="hl-0">group</span><span class="hl-1">.</span><span class="hl-2">getName</span><span class="hl-1">() == </span><span class="hl-0">newSong</span><span class="hl-1">.</span><span class="hl-2">getCreator</span><span class="hl-1">()) {</span><br/><span class="hl-1">            </span><span class="hl-0">group</span><span class="hl-1">.</span><span class="hl-2">addSong</span><span class="hl-1">(</span><span class="hl-0">newSong</span><span class="hl-1">);</span><br/><span class="hl-1">            </span><span class="hl-0">group</span><span class="hl-1">.</span><span class="hl-2">addGenre</span><span class="hl-1">(</span><span class="hl-0">newSong</span><span class="hl-1">.</span><span class="hl-2">getGenre</span><span class="hl-1">());</span><br/><span class="hl-1">            </span><span class="hl-0">group</span><span class="hl-1">.</span><span class="hl-2">updateListeners</span><span class="hl-1">(</span><span class="hl-0">newSong</span><span class="hl-1">.</span><span class="hl-2">getTimesListened</span><span class="hl-1">())</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">    </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-0">db</span><span class="hl-1">.</span><span class="hl-2">set</span><span class="hl-1">(</span><span class="hl-6">&#39;groups&#39;</span><span class="hl-1">, </span><span class="hl-0">groupsUpdated</span><span class="hl-1">).</span><span class="hl-2">write</span><span class="hl-1">();</span><br/><br/><span class="hl-1">    </span><span class="hl-4">let</span><span class="hl-1"> </span><span class="hl-0">genresUpdated</span><span class="hl-1">: </span><span class="hl-5">Array</span><span class="hl-1">&lt;</span><span class="hl-5">Genre</span><span class="hl-1">&gt; = </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">getGenres</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-0">genresUpdated</span><span class="hl-1">.</span><span class="hl-2">forEach</span><span class="hl-1">((</span><span class="hl-0">genre</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-3">if</span><span class="hl-1">(</span><span class="hl-0">genre</span><span class="hl-1">.</span><span class="hl-2">getName</span><span class="hl-1">() == </span><span class="hl-0">newSong</span><span class="hl-1">.</span><span class="hl-2">getGenre</span><span class="hl-1">()) {</span><br/><span class="hl-1">            </span><span class="hl-0">genre</span><span class="hl-1">.</span><span class="hl-2">addSong</span><span class="hl-1">(</span><span class="hl-0">newSong</span><span class="hl-1">);</span><br/><span class="hl-1">            </span><span class="hl-0">genre</span><span class="hl-1">.</span><span class="hl-2">addArtist</span><span class="hl-1">(</span><span class="hl-0">newSong</span><span class="hl-1">.</span><span class="hl-2">getCreator</span><span class="hl-1">());</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">    </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-0">db</span><span class="hl-1">.</span><span class="hl-2">set</span><span class="hl-1">(</span><span class="hl-6">&#39;genres&#39;</span><span class="hl-1">, </span><span class="hl-0">genresUpdated</span><span class="hl-1">).</span><span class="hl-2">write</span><span class="hl-1">();  </span><br/><span class="hl-1">}</span>
</code></pre>
<p>A la hora de imprimir por pantalla las canciones, albumes etc. Hemos implementado unas funciones que permiten ordenar alfabeticamente e inversamente los elementos de la base de datos. Por ejemplo con la función genreSort(), pasándole un true si queremos que se ordene alfabeticamente y un false en caso contrario, se nos devuelve un array de Genres ordenados correctamente.</p>
<pre><code><span class="hl-0">public</span><span class="hl-1"> </span><span class="hl-2">genreSort</span><span class="hl-1">(</span><span class="hl-0">asc</span><span class="hl-1">: </span><span class="hl-0">boolean</span><span class="hl-1"> = </span><span class="hl-4">true</span><span class="hl-1">): </span><span class="hl-5">Array</span><span class="hl-1">&lt;</span><span class="hl-0">Genre</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">    let </span><span class="hl-0">sortedList:</span><span class="hl-1"> </span><span class="hl-5">Array</span><span class="hl-1">&lt;</span><span class="hl-0">Genre</span><span class="hl-1">&gt; = </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">getGenres</span><span class="hl-1">();</span><br/><br/><span class="hl-1">    </span><span class="hl-0">sortedList</span><span class="hl-1">.</span><span class="hl-2">sort</span><span class="hl-1">(</span><span class="hl-4">function</span><span class="hl-1"> (</span><span class="hl-0">a</span><span class="hl-1">: </span><span class="hl-5">Genre</span><span class="hl-1">, </span><span class="hl-0">b</span><span class="hl-1">: </span><span class="hl-5">Genre</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-0">asc</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-3">return</span><span class="hl-1"> </span><span class="hl-0">a</span><span class="hl-1">.</span><span class="hl-2">getName</span><span class="hl-1">() &gt; </span><span class="hl-0">b</span><span class="hl-1">.</span><span class="hl-2">getName</span><span class="hl-1">() ? </span><span class="hl-8">1</span><span class="hl-1"> : -</span><span class="hl-8">1</span><span class="hl-1">;</span><br/><span class="hl-1">        } </span><span class="hl-3">else</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-3">return</span><span class="hl-1"> </span><span class="hl-0">a</span><span class="hl-1">.</span><span class="hl-2">getName</span><span class="hl-1">() &gt; </span><span class="hl-0">b</span><span class="hl-1">.</span><span class="hl-2">getName</span><span class="hl-1">() ? -</span><span class="hl-8">1</span><span class="hl-1"> : </span><span class="hl-8">1</span><span class="hl-1">;</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">    });</span><br/><br/><span class="hl-1">    </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-0">sortedList</span><span class="hl-1">;</span><br/><span class="hl-1">}</span>
</code></pre>
<p>Para grupos la función groupSort(), trabaja de la misma manera que la anterior</p>
<pre><code><span class="hl-0">public</span><span class="hl-1"> </span><span class="hl-2">groupSort</span><span class="hl-1">(</span><span class="hl-0">asc</span><span class="hl-1">: </span><span class="hl-0">boolean</span><span class="hl-1"> = </span><span class="hl-4">true</span><span class="hl-1">): </span><span class="hl-5">Array</span><span class="hl-1">&lt;</span><span class="hl-0">Group</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">    let </span><span class="hl-0">sortedList:</span><span class="hl-1"> </span><span class="hl-5">Array</span><span class="hl-1">&lt;</span><span class="hl-0">Group</span><span class="hl-1">&gt; = </span><span class="hl-5">Array</span><span class="hl-1">.</span><span class="hl-2">from</span><span class="hl-1">(</span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">getGroups</span><span class="hl-1">());</span><br/><br/><span class="hl-1">    </span><span class="hl-0">let</span><span class="hl-1"> </span><span class="hl-0">a</span><span class="hl-1">: </span><span class="hl-0">Group</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-0">let</span><span class="hl-1"> </span><span class="hl-0">b</span><span class="hl-1">: </span><span class="hl-0">Group</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><br/><span class="hl-1">    </span><span class="hl-0">sortedList</span><span class="hl-1">.</span><span class="hl-2">sort</span><span class="hl-1">(</span><span class="hl-4">function</span><span class="hl-1"> (</span><span class="hl-0">a</span><span class="hl-1">, </span><span class="hl-0">b</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-0">asc</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-3">return</span><span class="hl-1"> </span><span class="hl-0">a</span><span class="hl-1">.</span><span class="hl-2">getName</span><span class="hl-1">() &gt; </span><span class="hl-0">b</span><span class="hl-1">.</span><span class="hl-2">getName</span><span class="hl-1">() ? </span><span class="hl-8">1</span><span class="hl-1"> : -</span><span class="hl-8">1</span><span class="hl-1">;</span><br/><span class="hl-1">        } </span><span class="hl-3">else</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-3">return</span><span class="hl-1"> </span><span class="hl-0">a</span><span class="hl-1">.</span><span class="hl-2">getName</span><span class="hl-1">() &gt; </span><span class="hl-0">b</span><span class="hl-1">.</span><span class="hl-2">getName</span><span class="hl-1">() ? -</span><span class="hl-8">1</span><span class="hl-1"> : </span><span class="hl-8">1</span><span class="hl-1">;</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">    });</span><br/><br/><span class="hl-1">    </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-0">sortedList</span><span class="hl-1">;</span><br/><span class="hl-1">}</span>
</code></pre>
<p>Para las canciones, a parte de las ordenaciones vistas en la funciones anteriores, también se puede ordenar de la mas popular a la menos, por número de reproducciones y al revés. En este caso la función recibe un number. 0 en caso alfabetico, 1 en caso inverso, 2 por popularidad creciente y 3 por popularidad decreciente.</p>
<pre><code><span class="hl-0">public</span><span class="hl-1"> </span><span class="hl-2">artistSort</span><span class="hl-1">(</span><span class="hl-0">type</span><span class="hl-1">: </span><span class="hl-0">number</span><span class="hl-1"> = </span><span class="hl-8">0</span><span class="hl-1">): </span><span class="hl-5">Array</span><span class="hl-1">&lt;</span><span class="hl-0">Artist</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">    let </span><span class="hl-0">sortedList:</span><span class="hl-1"> </span><span class="hl-5">Array</span><span class="hl-1">&lt;</span><span class="hl-0">Artist</span><span class="hl-1">&gt; = </span><span class="hl-5">Array</span><span class="hl-1">.</span><span class="hl-2">from</span><span class="hl-1">(</span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">getArtists</span><span class="hl-1">());</span><br/><br/><span class="hl-1">    </span><span class="hl-0">let</span><span class="hl-1"> </span><span class="hl-0">a</span><span class="hl-1">: </span><span class="hl-0">Artist</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-0">let</span><span class="hl-1"> </span><span class="hl-0">b</span><span class="hl-1">: </span><span class="hl-0">Artist</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><br/><span class="hl-1">    </span><span class="hl-0">sortedList</span><span class="hl-1">.</span><span class="hl-2">sort</span><span class="hl-1">(</span><span class="hl-4">function</span><span class="hl-1"> (</span><span class="hl-0">a</span><span class="hl-1">, </span><span class="hl-0">b</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-0">type</span><span class="hl-1"> == </span><span class="hl-8">0</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-3">return</span><span class="hl-1"> </span><span class="hl-0">a</span><span class="hl-1">.</span><span class="hl-2">getName</span><span class="hl-1">() &gt; </span><span class="hl-0">b</span><span class="hl-1">.</span><span class="hl-2">getName</span><span class="hl-1">() ? </span><span class="hl-8">1</span><span class="hl-1"> : -</span><span class="hl-8">1</span><span class="hl-1">;</span><br/><span class="hl-1">        } </span><span class="hl-3">else</span><span class="hl-1"> </span><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-0">type</span><span class="hl-1"> == </span><span class="hl-8">1</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-3">return</span><span class="hl-1"> </span><span class="hl-0">a</span><span class="hl-1">.</span><span class="hl-2">getName</span><span class="hl-1">() &gt; </span><span class="hl-0">b</span><span class="hl-1">.</span><span class="hl-2">getName</span><span class="hl-1">() ? -</span><span class="hl-8">1</span><span class="hl-1"> : </span><span class="hl-8">1</span><span class="hl-1">;</span><br/><span class="hl-1">        } </span><span class="hl-3">else</span><span class="hl-1"> </span><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-0">type</span><span class="hl-1"> == </span><span class="hl-8">2</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-3">return</span><span class="hl-1"> </span><span class="hl-0">a</span><span class="hl-1">.</span><span class="hl-2">getListeners</span><span class="hl-1">() - </span><span class="hl-0">b</span><span class="hl-1">.</span><span class="hl-2">getListeners</span><span class="hl-1">();</span><br/><span class="hl-1">        } </span><span class="hl-3">else</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-3">return</span><span class="hl-1"> </span><span class="hl-0">a</span><span class="hl-1">.</span><span class="hl-2">getListeners</span><span class="hl-1">() &gt; </span><span class="hl-0">b</span><span class="hl-1">.</span><span class="hl-2">getListeners</span><span class="hl-1">() ? -</span><span class="hl-8">1</span><span class="hl-1"> : </span><span class="hl-8">1</span><span class="hl-1">;</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">    });</span><br/><br/><span class="hl-1">    </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-0">sortedList</span><span class="hl-1">;</span><br/><span class="hl-1">}</span>
</code></pre>
<p>En cuanto a los albumes igual que con las canciones se recibe un number. 0 en caso alfabetico, 1 en caso inverso, 2 por fecha de lanzamiento creciente, 3 por orden de lanzamiento decreciente.</p>
</div></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class="current"><a href="modules.html">Modules</a></li><li class=" tsd-kind-module"><a href="modules/album.html">album</a></li><li class=" tsd-kind-module"><a href="modules/artist.html">artist</a></li><li class=" tsd-kind-module"><a href="modules/compareSet.html">compare<wbr/>Set</a></li><li class=" tsd-kind-module"><a href="modules/durationType.html">duration<wbr/>Type</a></li><li class=" tsd-kind-module"><a href="modules/genre.html">genre</a></li><li class=" tsd-kind-module"><a href="modules/group.html">group</a></li><li class=" tsd-kind-module"><a href="modules/index.html">index</a></li><li class=" tsd-kind-module"><a href="modules/musicDataBase.html">music<wbr/>Data<wbr/>Base</a></li><li class=" tsd-kind-module"><a href="modules/playlist.html">playlist</a></li><li class=" tsd-kind-module"><a href="modules/song.html">song</a></li></ul></nav></div></div></div><footer class="with-border-bottom"><div class="container"><h2>Legend</h2><div class="tsd-legend-group"><ul class="tsd-legend"><li class="tsd-kind-function"><span class="tsd-kind-icon">Function</span></li><li class="tsd-kind-function tsd-has-type-parameter"><span class="tsd-kind-icon">Function with type parameter</span></li><li class="tsd-kind-type-alias"><span class="tsd-kind-icon">Type alias</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-class"><span class="tsd-kind-icon">Class</span></li></ul></div><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="container tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><script src="assets/main.js"></script></body></html>